<div class="modal-overlay" *ngIf="isOpen" (click)="close()">
  <div class="modal-dialog" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>{{ dialogTitle }}</h2>
      <button class="btn-close" (click)="close()" aria-label="Cerrar">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <div class="modal-body">
      <p class="confirmation-message">{{ confirmationMessage }}</p>

      <div class="action-options">
        <label class="radio-option" [class.selected]="selectedAction === 'deactivate'">
          <input 
            type="radio" 
            name="action" 
            value="deactivate" 
            [(ngModel)]="selectedAction"
            (change)="onActionChange()"
          />
          <div class="option-content">
            <div class="option-icon warning">
              <i class="fas fa-pause-circle"></i>
            </div>
            <div class="option-text">
              <h3>Inactivar</h3>
              <p>El {{ itemType }} se marcará como inactivo pero se mantendrá en la base de datos. Podrás reactivarlo más tarde.</p>
            </div>
          </div>
        </label>

        <label class="radio-option" [class.selected]="selectedAction === 'delete'">
          <input 
            type="radio" 
            name="action" 
            value="delete" 
            [(ngModel)]="selectedAction"
            (change)="onActionChange()"
          />
          <div class="option-content">
            <div class="option-icon danger">
              <i class="fas fa-trash-alt"></i>
            </div>
            <div class="option-text">
              <h3>Eliminar Definitivamente</h3>
              <p class="warning-text">
                <i class="fas fa-exclamation-triangle"></i>
                Esta acción es <strong>irreversible</strong>. El {{ itemType }} se eliminará permanentemente de la base de datos.
              </p>
            </div>
          </div>
        </label>
      </div>

      <!-- Campo de contraseña (solo visible para eliminación) -->
      <div class="password-section" *ngIf="selectedAction === 'delete'">
        <div class="alert alert-danger">
          <i class="fas fa-shield-alt"></i>
          <strong>Verificación requerida:</strong> Ingresa la contraseña de administrador para confirmar la eliminación permanente.
        </div>
        
        <div class="form-group">
          <label for="password">
            <i class="fas fa-lock"></i>
            Contraseña de Administrador
          </label>
          <input 
            type="password" 
            id="password"
            class="form-control"
            [(ngModel)]="password"
            (input)="onPasswordInput()"
            placeholder="Ingresa la contraseña"
            [class.error]="passwordError"
          />
          <span class="error-message" *ngIf="passwordError">
            <i class="fas fa-exclamation-circle"></i>
            {{ passwordError }}
          </span>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button 
        class="btn btn-secondary" 
        (click)="close()"
        [disabled]="isSubmitting"
      >
        Cancelar
      </button>
      <button 
        class="btn"
        [ngClass]="confirmButtonClass"
        (click)="confirm()"
        [disabled]="isSubmitting"
      >
        <i class="fas fa-spinner fa-spin" *ngIf="isSubmitting"></i>
        <i class="fas" 
           [ngClass]="selectedAction === 'deactivate' ? 'fa-pause-circle' : 'fa-trash-alt'"
           *ngIf="!isSubmitting"></i>
        {{ confirmButtonText }}
      </button>
    </div>
  </div>
</div>
