<div *ngIf="isOpen" class="modal-overlay" (click)="close()">
  <div class="modal-dialog" (click)="$event.stopPropagation()">
    <!-- Header -->
    <div class="modal-header">
      <h2>Â¿QuÃ© deseas hacer con el equipo?</h2>
      <button class="close-btn" (click)="close()">&times;</button>
    </div>

    <!-- Body -->
    <div class="modal-body">
      <p class="equipo-name">Equipo: <strong>{{ equipoNombre }}</strong></p>

      <!-- Opciones -->
      <div class="options-container">
        <!-- OpciÃ³n 1: Enviar a Bodega -->
        <div
          class="option-card"
          [class.selected]="selectedAction === 'bodega'"
          (click)="selectAction('bodega')">
          <div class="option-icon">ğŸ“¦</div>
          <h3>Enviar a Bodega</h3>
          <p>El equipo se marcarÃ¡ como inactivo y se guardarÃ¡ en bodega. PodrÃ¡ ser reactivado posteriormente.</p>
        </div>

        <!-- OpciÃ³n 2: Dar de Baja -->
        <div
          class="option-card"
          [class.selected]="selectedAction === 'baja'"
          (click)="selectAction('baja')">
          <div class="option-icon">ğŸ—‘ï¸</div>
          <h3>Dar de Baja</h3>
          <p>El equipo se darÃ¡ de baja permanentemente. Se crearÃ¡ un registro histÃ³rico.</p>
        </div>
      </div>

      <!-- Formulario segÃºn la opciÃ³n seleccionada -->
      <div class="form-container" *ngIf="selectedAction">
        <!-- Formulario para Bodega -->
        <div *ngIf="selectedAction === 'bodega'" class="form-section">
          <label for="motivo">Motivo (opcional):</label>
          <textarea
            id="motivo"
            [(ngModel)]="motivo"
            placeholder="Ej: Equipo en reparaciÃ³n, obsoleto, etc."
            rows="3"></textarea>
        </div>

        <!-- Formulario para Baja -->
        <div *ngIf="selectedAction === 'baja'" class="form-section">
          <label for="justificacion">JustificaciÃ³n de la baja: *</label>
          <textarea
            id="justificacion"
            [(ngModel)]="justificacionBaja"
            placeholder="Describa por quÃ© se da de baja el equipo"
            rows="3"
            required></textarea>

          <label for="accesorios">Accesorios reutilizables (opcional):</label>
          <textarea
            id="accesorios"
            [(ngModel)]="accesoriosReutilizables"
            placeholder="Ej: Cable de red, mouse, teclado, etc."
            rows="2"></textarea>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="modal-footer">
      <button class="btn btn-cancel" (click)="close()">Cancelar</button>
      <button
        class="btn btn-confirm"
        [disabled]="!selectedAction || (selectedAction === 'baja' && !justificacionBaja)"
        (click)="confirm()">
        {{ selectedAction === 'bodega' ? 'Enviar a Bodega' : 'Dar de Baja' }}
      </button>
    </div>
  </div>
</div>
